# freeBSD_lab7
## Завдання №1
Використайте popen(), щоб передати вивід команди rwho (команда UNIX) до more (команда UNIX) у програмі на C.
## Реалізація завдання
Команда `rwho` на FreeBSD (і взагалі в UNIX) працює лише якщо запущений демон `rwhod` і в мережі є активні клієнти, які його використовують. Якщо я просто на локальній машині без інших комп’ютерів у мережі з активним `rwhod`, команда `rwho` поверне порожній результат.

Отже, було написано програму, яка використовує функцію `popen()` для запуску команд оболонки. Спочатку команда `ls -l /` виконується за допомогою `popen` з режимом читання (`"r"`) - це створює потік для читання виводу команди. Потім запускається команда `more` у режимі запису (`"w"`) через `popen`, що дозволяє передавати дані до команди `more`. Програма зчитує вміст потоку `in`, збережений у буфері, рядок за рядком, і передає ці рядки в потік `out`, який потім обробляється командою `more`. Наприкінці програма закриває обидва потоки (`pclose()`), забезпечуючи коректне завершення виконання.
## Компіляція та виконання завдання
![Знімок екрана 2025-05-01 165855](https://github.com/user-attachments/assets/9beff27f-7d77-4c56-a272-9b394d479e45)

## Завдання №2
Напишіть програму мовою C, яка імітує команду `ls -l` в UNIX — виводить список усіх файлів у поточному каталозі та перелічує права доступу тощо. (Варіант вирішення, що просто виконує `ls -l` із вашої програми, — не підходить.)
## Реалізація завдання
Було написано програму, яка імітує команду `ls -l` в UNIX без використання самої команди. Вона робить наступні дії:
+ Відкриває поточний каталог (`opendir`) і отримує список його файлів та папок (`readdir`).
+ Ігнорує спеціальні елементи каталогу `.` та `..`.
+ Для кожного файлу/папки використовує функцію `stat`, щоб отримати інформацію про файл, як-от права доступу, розмір, час останньої модифікації тощо.
+ Форматує права доступу у вигляді рядка за допомогою функції `print_permissions`.
+ Виводить кількість жорстких посилань, ім'я власника та групи (використовуючи `getpwuid` і `getgrgid`), розмір файлу та дату останньої модифікації (форматується через `strftime`).
+ Виводить ім'я файлу або папки.

## Компіляція та виконання завдання
![image](https://github.com/user-attachments/assets/8e38d1f6-7634-4b0b-b7bb-4d6706f3866d)

## Завдання №3
Напишіть програму, яка друкує рядки з файлу, що містять слово, передане як аргумент програми (проста версія утиліти grep в UNIX).
## Реалізація завдання
Було написано програму, яка імітує базову функціональність `grep`. Її дії:
- Перевіряє, що користувач передав два аргументи: слово для пошуку та назву файлу.
- Відкриває файл для читання. Якщо файл не відкривається, виводить повідомлення про помилку.
- Зчитує файл рядок за рядком за допомогою функції `fgets`.
- Перевіряє, чи містить кожен рядок задане слово (`strstr`).
- Якщо слово знайдено, друкує рядок на стандартний вихід (`printf`).
- Закриває файл після завершення роботи.

**Приклад використання**: команда `./Ex3 error /var/log/messages` друкує всі рядки з файлу `/var/log/messages`, що містять слово `error`.
## Компіляція та виконання завдання
![image](https://github.com/user-attachments/assets/2fd2ae17-27d1-4cf4-8a92-c123c53df9aa)
